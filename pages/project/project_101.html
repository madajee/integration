<div class = "container-fluid mt-2">
    <div class="row">
        <project-side-menu></project-side-menu>
        <div class="col-md-10">
            <h6 class="text-center">PROJECT 101<span class="alignright"><a href="https://github.com/madajee/todo.git" target="_blank">Todo NodeJS Repo</a></span></h6>
            <div class="grooveborder">
                <h3>Dockerize NodeJS App</h3>
                <p>In this small project, I have developed a simple NodeJS Todo App, write the dockerfile and run the node app as a container. I have also enabled Github actions to trigger the build which pushes the updated image to the docker hub. One has to install docker on the local machine and create a docker hub account.
                    <ul>
                        <li>Version 1: Use express module to serve a basic Todo UI. App starts express server on port 3000.</li>
                        <li>Version 2: Use DB persistence and leverage docker compose.</li>
                    </ul>
                </p>
                <pre>
                    <code>
                        <h3>dockerfile</h3>
                        # syntax=docker/dockerfile:1

                        FROM node:18-alpine
                        ENV NODE_ENV=production

                        WORKDIR /app

                        COPY ["package.json", "package-lock.json*", "./"]

                        RUN npm install --production

                        COPY . .

                        CMD [ "node", "app.js" ]
                    </code>                    
                </pre>
                <pre>
                    <code>
                        <h3>Steps</h3>
                        <ul>
                            <li>Clone the repo and CD to the repo directory</li>
                            <li>Docker Build (docker build --tag DOCKERHUB_USERNAME/todo .)</li>
                            <li>Docker Run (docker run -d -p 3000:3000 todo)</li>
                            <li>Docker Login to Dockerhub (docker login)</li>
                            <li>Docker Push (docker push DOCKERHUB_USERNAME/todo)</li>
                        </ul>
                    </code>                    
                </pre>
                <pre>
                    <code>
                        <h3>Github Action Steps (todo/.github/workflows/main.yml)</h3>
                        <p>One has to create DOCKERHUB_USERNAME and DOCKERHUB_TOKEN as repository secrets. Dockerhub_Token is the access token generated from the developer dockerhub account.</p>
                        <ul>
                            <li>Checkout (actions/checkout@v3)</li>
                            <li>Login to Docker Hub (docker/login-action@v2)</li>
                            <li>Set up Docker Buildx (docker/setup-buildx-action@v2)</li>
                            <li>Build and push (docker/build-push-action@v4)</li>
                        </ul>
                    </code>                    
                </pre>
                <img ng-src="images/dockerize-node-app-v1.png" alt="iot-solution-view-v1" width="1000" height="400">
                <h5>SOURCES</h5>
                <ul>
                    <li>https://blog.devgenius.io/how-to-build-and-run-a-nodejs-app-with-docker-github-actions-59eb264dfef5</li>
                </ul>
            </div>
        </div>
    </div>
</div>
<custom-footer authorname='Jeetan' linkurl='https://www.linkedin.com/in/jeetan-madaan-37aaa113/'></custom-footer>